import{j as e}from"./jsx-runtime.K1e75nIr.js";import{r as n}from"./index.NEDEFKed.js";import{g as b,a as N,b as g}from"./time.DtebfkEO.js";const k=()=>e.jsx("div",{className:"modal fade ",id:"modal-book",tabIndex:-1,"aria-labelledby":"modal-label-book","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog ",children:e.jsxs("div",{className:"modal-content rounded-1",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h1",{className:"modal-title fs-5 px-2",id:"modal-label-book",children:[" ","Create a New Study Session"]}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"model-body p-2 pt-0",children:e.jsx(v,{})})]})})}),v=()=>{let[l,d]=n.useState({}),[m,u]=n.useState([]),[h,r]=n.useState([]),[p,x]=n.useState([]),[j,c]=n.useState(!1);console.log("booking modal"),n.useEffect(()=>{fetch("/courses.json",{method:"GET"}).then(a=>a.json()).then(a=>{u(a)})},[]);const t=(a,s,o)=>{s||(s=a.target.name),o||(o=a.target.value),d(i=>({...i,[s]:o}))};return e.jsxs("form",{className:"modal-body",onSubmit:a=>f(a,l),children:[e.jsxs("div",{className:"card-body pt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:" form-label ",children:" Course Name "}),e.jsx("input",{type:"text",className:"form-control",value:p,placeholder:"Start Searching",onChange:a=>{x(a.target.value.toUpperCase()),a.target.value?(c(!0),r(m.filter(s=>s.code.includes(a.target.value.toUpperCase())).slice(0,15))):(c(!1),r())}}),j?e.jsxs("select",{defaultValue:[],onChange:a=>{const s=JSON.parse(a.target.value);t(a,"courseCode",s.code),t(a,"courseName",s.name)},className:" form-select",children:[e.jsx("option",{defaultValue:[],children:" Select Class"}),h.map((a,s)=>e.jsx("option",{value:JSON.stringify(a),children:a.code+" -  "+a.name},s))]}):""]}),e.jsxs("div",{className:"my-3",children:[e.jsxs("label",{className:"form-label w-100",children:[" Study Group Name ",e.jsx("span",{className:"text-secondary",children:"(optional)"})]}),e.jsx("input",{name:"name",value:l.name||"",onChange:t,className:"form-control",placeholder:"Enter Study Session Name"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"location",className:"form-label",children:" Location "}),e.jsx("input",{className:"form-control",name:"location",value:l.location||"",onChange:t,required:!0,placeholder:"Enter location"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"size",className:"form-label",children:"Group Size"}),e.jsxs("select",{name:"groupSize",className:"form-select",value:l.groupSize,required:!0,onChange:t,children:[e.jsx("option",{value:"",children:"Select Group Size"}),e.jsx("option",{value:"4",children:"Small (4)"}),e.jsx("option",{value:"8",children:"Medium (8)"}),e.jsx("option",{value:"16",children:"Large (16)"}),e.jsx("option",{value:"-1",children:"Unlimited"})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"form-label",children:"Start"}),e.jsx("div",{className:"col",children:e.jsxs("select",{name:"startDate",className:"form-select",value:l.startDate,required:!0,onChange:t,children:[e.jsx("option",{value:"",children:"Select Start Date"}),b().map((a,s)=>e.jsx("option",{value:s,children:a.toLocaleString("en-us",{weekday:"long"})+", "+a.toLocaleString("en-us",{month:"long"})+" "+a.getDate()},s))]})}),e.jsx("span",{className:"col-auto",children:e.jsx("label",{className:"form-label",children:"@"})}),e.jsx("div",{className:"col",children:e.jsxs("select",{name:"startTime",className:"form-select",value:l.startTime,onChange:t,required:!0,children:[e.jsx("option",{value:"",children:"Select Start Time"}),[...Array(24*4).keys()].map(a=>e.jsx("option",{value:a,children:N(a).toLocaleTimeString("en-US")},a))]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"form-label",children:"End"}),e.jsx("div",{className:"col",children:e.jsxs("select",{name:"endDate",className:"form-select",value:l.endDate,onChange:t,required:!0,children:[e.jsx("option",{value:"",children:"Select End Date"}),b().map((a,s)=>e.jsx("option",{value:s,children:a.toLocaleString("en-us",{weekday:"long"})+", "+a.toLocaleString("en-us",{month:"long"})+" "+a.getDate()},s))]})}),e.jsx("div",{className:"col-auto",children:e.jsx("label",{className:"form-label",children:"@"})}),e.jsx("div",{className:"col",children:e.jsxs("select",{name:"endTime",className:"form-select",value:l.endTime,onChange:t,required:!0,children:[e.jsx("option",{value:"",children:"Select End Time"}),[...Array(24*4).keys()].map(a=>e.jsx("option",{value:a,children:N(a).toLocaleTimeString("en-US")},a))]})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:[" Description ",e.jsx("span",{className:"text-secondary",children:"(optional)"})]}),e.jsx("textarea",{name:"description",value:l.description||"",onChange:t,className:"form-control",placeholder:"Begin Typing to add a description",rows:3})]}),e.jsx("div",{className:"pt-3",children:e.jsx("button",{id:"bookButton",type:"submit",className:"btn btn-primary mx-auto w-100",children:"Create"})})]}),[...Object.entries(l)].map(a=>e.jsx("p",{children:a}))]})};function f(l,{endDate:d,endTime:m,startDate:u,startTime:h,courseCode:r,courseName:p,description:x,location:j,groupSize:c,name:t}){l.preventDefault();const a=g(u,h),s=g(d,m),o={course:r,course_title:p,name:t||"",description:x||"",start:a,end:s,location:j,max_buddies:c};console.log(o),fetch("/api/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(i=>{i.ok?window.location.replace("/"):console.log(i)})}export{k as default};
